#cloud-config
hostname: jump
ssh_pwauth: False
password: cloud
package_upgrade: true
package_update: true
#
# Install the JUMP server.
runcmd:
# Support packages.
 - apt-get install -y curl wget nmap
 - apt-get install -y elinks mc screen
 - apt-get install -y taskwarrior
 - apt-get install -y python-openstacksdk
# Remote monitor package.
 - apt-get install -y collectd collectd-utils
# install ASCII art packages
 - apt-get install -y figlet lolcat 
 - apt-get install -y fonts-powerline powerline
# create dynamic files
 - sudo touch /etc/update-motd.d/00-header && touch /etc/update-motd.d/10-sysinfo && touch /etc/update-motd.d/90-footer
# make files executable
 - sudo chmod +x /etc/update-motd.d/*
# remove MOTD file and create an empty file
 - sudo rm /etc/motd
 - touch /etc/motd
#comment out line /etc/pam.d/login 
 - sed -i 's/^session    optional   pam_motd.so noupdate/#session    optional   pam_motd.so noupdate/g' /etc/pam.d/login
#add 3 lines to the end of /etc/ssh/sshd_config to stop ssh from printing banner.
 - echo ' ' >> /etc/ssh/sshd_config
 - echo 'PrintMotd   no' >> /etc/ssh/sshd_config
 - echo 'Banner      none' >> /etc/ssh/sshd_config
 - echo 'UsePAM      yes' >> /etc/ssh/sshd_config
#Jump Server Install Finished
#Need to put bash MOTD files here. 
write_files:
 -  encoding: b64
    content: IyEvYmluL3NoICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMgICAgMDAtaGVhZGVyIC0gY3JlYXRlIHRoZSBoZWFkZXIgb2YgdGhlIE1PVEQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIyAgICBDb3B5cmlnaHQgKGMpIDIwMTMgTmljayBDaGFybHRvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIENhbm9uaWNhbCBMdGQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMgICAgTW9kaWZpZWQgICAgICAyMDE5IGJ5IERhbmllbCBZb3VudCAKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojICAgIEF1dGhvcnM6IE5pY2sgQ2hhcmx0b24gPGhlbGxvQG5pY2tjaGFybHRvbi5uZXQ+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMgICAgICAgICAgICAgRHVzdGluIEtpcmtsYW5kIDxraXJrbGFuZEBjYW5vbmljYWwuY29tPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMgICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIyAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAojICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiMKIyAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKIyAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojCiMgICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcKIyAgICB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLAojICAgIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0EuCiAKWyAtciAvZXRjL2xzYi1yZWxlYXNlIF0gJiYgLiAvZXRjL2xzYi1yZWxlYXNlCiAKaWYgWyAteiAiJERJU1RSSUJfREVTQ1JJUFRJT04iIF0gJiYgWyAteCAvdXNyL2Jpbi9sc2JfcmVsZWFzZSBdOyB0aGVuCiAgICAgICAgIyBGYWxsIGJhY2sgdG8gdXNpbmcgdGhlIHZlcnkgc2xvdyBsc2JfcmVsZWFzZSB1dGlsaXR5CiAgICAgICAgRElTVFJJQl9ERVNDUklQVElPTj0kKGxzYl9yZWxlYXNlIC1zIC1kKQpmaQogCmZpZ2xldCAkKGhvc3RuYW1lKSB8IC91c3IvZ2FtZXMvbG9sY2F0IC1mCnByaW50ZiAiXG4iCiAKcHJpbnRmICJXZWxjb21lIHRvICVzICglcykuXG4iICIkRElTVFJJQl9ERVNDUklQVElPTiIgIiQodW5hbWUgLXIpIgpwcmludGYgIlxuIg==
    owner: root:root
    path: /etc/update-motd.d/00-header
    permissions: '0644'
 -  encoding: b64
    content: IyEvYmluL2Jhc2gKIwojICAgIHN5c2luZm8gLSBnZW5lcmF0ZSB0aGUgc3lzdGVtIGluZm9ybWF0aW9uCiMgICAgQ29weXJpZ2h0IChjKSAyMDEzIE5pY2sgQ2hhcmx0b24KIyAgICBNb2RpZmllZCBieSAgIDIwMTkgRGFuaWVsIFlvdW50CiMKIyAgICBBdXRob3JzOiBOaWNrIENoYXJsdG9uIDxoZWxsb0BuaWNrY2hhcmx0b24ubmV0PgojCiMgICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyAgICBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojICAgIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDIgb2YgdGhlIExpY2Vuc2UsIG9yCiMgICAgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIwojICAgIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQojICAgIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZwojICAgIHdpdGggdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4sCiMgICAgNTEgRnJhbmtsaW4gU3RyZWV0LCBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQSAwMjExMC0xMzAxIFVTQS4KIApkYXRlPWBkYXRlYApsb2FkPWBjYXQgL3Byb2MvbG9hZGF2ZyB8IGF3ayAne3ByaW50ICQxfSdgCnJvb3RfdXNhZ2U9YGRmIC1oIC8gfCBhd2sgJy9cLy8ge3ByaW50ICQoTkYtMSl9J2AKbWVtb3J5X3VzYWdlPWBmcmVlIC1tIHwgYXdrICcvTWVtOi8geyB0b3RhbD0kMiB9IC9idWZmZXJzXC9jYWNoZS8geyB1c2VkPSQzIH0gRU5EIHsgcHJpbnRmKCIlMy4xZiUlIiwgdXNlZC90b3RhbCoxMDApfSdgCnN3YXBfdXNhZ2U9YGZyZWUgLW0gfCBhd2sgJy9Td2FwLyB7IHByaW50ZigiJTMuMWYlJSIsICJleGl0ICEkMjskMy8kMioxMDAiKSB9J2AKdXNlcnM9YHVzZXJzIHwgd2MgLXdgCnRpbWU9YHVwdGltZSB8IGdyZXAgLW9oZSAndXAgLionIHwgc2VkICdzLywvXCBob3Vycy9nJyB8IGF3ayAneyBwcmludGYgJDIiICIkMyB9J2AKcHJvY2Vzc2VzPWBwcyBhdXggfCB3YyAtbGAKaXA9JCgvc2Jpbi9pcCAtbyAtNCBhZGRyIGxpc3QgZXRoMCB8IGF3ayAne3ByaW50ICQ0fScgfCBjdXQgLWQvIC1mMSkKIAplY2hvICJTeXN0ZW0gaW5mb3JtYXRpb24gYXMgb2Y6ICRkYXRlIgplY2hvCnByaW50ZiAiU3lzdGVtIGxvYWQ6XHQlc1x0SVAgQWRkcmVzczpcdCVzXG4iICRsb2FkICRpcApwcmludGYgIk1lbW9yeSB1c2FnZTpcdCVzXHRTeXN0ZW0gdXB0aW1lOlx0JXNcbiIgJG1lbW9yeV91c2FnZSAiJHRpbWUiCnByaW50ZiAiVXNhZ2Ugb24gLzpcdCVzXHRTd2FwIHVzYWdlOlx0JXNcbiIgJHJvb3RfdXNhZ2UgJHN3YXBfdXNhZ2UKcHJpbnRmICJMb2NhbCBVc2VyczpcdCVzXHRQcm9jZXNzZXM6XHQlc1xuIiAkdXNlcnMgJHByb2Nlc3NlcwplY2hv
    owner: root:root
    path: /etc/update-motd.d/10-sysinfo
    permissions: '0644'
 -  encoding: b64
    content: IyEvYmluL3NoCiMKIyAgICA5MC1mb290ZXIgLSB3cml0ZSB0aGUgYWRtaW4ncyBmb290ZXIgdG8gdGhlIE1PVEQKIyAgICBDb3B5cmlnaHQgKGMpIDIwMTMgTmljayBDaGFybHRvbgojICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIENhbm9uaWNhbCBMdGQuCiMKIyAgICBBdXRob3JzOiBOaWNrIENoYXJsdG9uIDxoZWxsb0BuaWNrY2hhcmx0b24ubmV0PgojICAgICAgICAgICAgIER1c3RpbiBLaXJrbGFuZCA8a2lya2xhbmRAY2Fub25pY2FsLmNvbT4KIwojICAgIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgICAgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyAgICB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgojICAgIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMKIyAgICBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKIyAgICBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojCiMgICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmcKIyAgICB3aXRoIHRoaXMgcHJvZ3JhbTsgaWYgbm90LCB3cml0ZSB0byB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuLAojICAgIDUxIEZyYW5rbGluIFN0cmVldCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0EuCiAKWyAtZiAvZXRjL21vdGQudGFpbCBdICYmIGNhdCAvZXRjL21vdGQudGFpbCB8fCB0cnVlCg==
    owner: root:root
    path: /etc/update-motd.d/90-footer
    permissions: '0644'
